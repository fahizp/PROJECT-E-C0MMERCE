<!-- <style>
    /**
 * Fonts
 */


 /**
  * Reset
  */
 *,
 *::before,
 *::after {
     box-sizing: border-box;
 }
 
 
 /**
  * Article Container
  */
 .article-container {
     padding: 2rem;
 }
 


 /**
  * Article Block
  */
 .article-block {
     text-align: center;
 }
 
 .article-block .entry-content > p {
     color: #666;
 }
 
 /**
  * Tabs Container
  */
 .tabs-container {
     padding: 2rem;
 }
 
 /**
  * Tabs Block
  */
 .tabs-block {
     display: flex;
     align-items: center;
     justify-content: center;
 }
 
 /**
  * Tabs
  */
 .tabs {
     display: flex;
 }
 
 .tabs > ul {
     list-style-type: none;
     margin: 0;
     padding: 0;
     width: 15%;
    
 }
 
 .tabs > ul li {
     display: block;
 }
 
 .nav-link{
    display: flex;
     border-bottom: none;
     text-decoration: none;
     background-color: #fff;
     color: #000;
     border-radius: 10px;
     padding-top: 15px;
     padding-right: 30px;
     padding-bottom: 15px;
     padding-left: 30px;
     transition: all 0.2s ease-in-out;
     word-wrap: break-word;
 }

 .tabs > ul li ,
 .tabs > ul li a:visited {
     display: flex;
     border-bottom: none;
     text-decoration: none;
     background-color: #fff;
     color: #fff;
     border-radius: 10px;
     padding-top: 15px;
     padding-right: 30px;
     padding-bottom: 15px;
     padding-left: 30px;
     transition: all 0.2s ease-in-out;
     word-wrap: break-word;
     
 }
 
 .tabs > ul li a:hover,
 .tabs > ul li a:focus,
 .tabs > ul li a:active {
     border-bottom: none;
     outline: 0;
 }
 
 .tabs > ul li a.active {
     background-color: #088178;
     color: white;
     width: 210px;
 }
 
 
 
 .tabs > ul li a > span {
     width: 100%;
     display: flex;
     align-items: center;
     justify-content: center;
     text-align: center;
 }
 
 .tabs > ul li a > span.tab-label {
     display: none;
 }
 
 .tabs section {
     width: 100%;
     background-color: transparent;
     padding: 1rem;
     display: none;
     word-wrap: break-word;

     margin-left: 100px ;
 }
 
 .tabs section > * {
     opacity: 0;
     transform: translateY(20px);
     transition: opacity 0.2s, transform 0.2s;
 }
 
 .tabs section > *:nth-child(1) {
     transition-delay: 0.2s;
 }
 
 .tabs section > *:nth-child(2) {
     transition-delay: 0.3s;
 }
 
 .tabs section > *:nth-child(3) {
     transition-delay: 0.4s;
 }
 
 .tabs section > *:nth-child(4) {
     transition-delay: 0.5s;
 }
 
 .tabs section > *:nth-child(5) {
     transition-delay: 0.6s;
 }
 
 .tabs section > *:nth-child(6) {
     transition-delay: 0.7s;
 }
 
 .tabs section > *:nth-child(7) {
     transition-delay: 0.8s;
 }
 
 .tabs section > *:nth-child(8) {
     transition-delay: 0.9s;
 }
 
 .tabs section > *:nth-child(9) {
     transition-delay: 1s;
 }
 
 .tabs section > *:nth-child(10) {
     transition-delay: 1.1s;
 }
 
 .tabs section > *:nth-child(11) {
     transition-delay: 1.2s;
 }
 
 .tabs section > *:nth-child(12) {
     transition-delay: 1.3s;
 }
 
 .tabs section > *:nth-child(13) {
     transition-delay: 1.4s;
 }
 
 .tabs section > *:nth-child(14) {
     transition-delay: 1.5s;
 }
 
 .tabs section > *:nth-child(15) {
     transition-delay: 1.6s;
 }
 
 .tabs section > *:nth-child(16) {
     transition-delay: 1.7s;
 }
 
 .tabs section > *:nth-child(17) {
     transition-delay: 1.8s;
 }
 
 .tabs section > *:nth-child(18) {
     transition-delay: 1.9s;
 }
 
 .tabs section > *:nth-child(19) {
     transition-delay: 2s;
 }
 
 .tabs section > *:nth-child(20) {
     transition-delay: 2.1s;
 }
 
 .tabs section.active {
     display: block;
 }
 
 .tabs section.active-content > * {
     opacity: 1;
     transform: translateY(0);
 }
 @media (min-width: 576px) {
 
     .tabs > ul {
         width: 150px;
     }
 
     .tabs > ul li a {
         flex-wrap: wrap;
     }
 
     .tabs > ul li a > span {
         width: 100%;
     }
 
     .tabs > ul li a > span.tab-label {
         width: 100%;
         display: block;
         margin-top: 0.2rem;
     }
 
     .tabs section {
         padding: 2rem 2rem;
     }
 }
 @media (min-width: 768px) {
 
     body {
         font-size: 1.125rem;
     }
 
     .tabs-container {
         padding: 4rem 4rem;
     }
 }
 @media (min-width: 992px) {
 
     .tabs {
         width: 800px;
     }
 }
 
</style>

<div class="site-wrapper">
    <section class="pt-150 pb-150">
        <div class="tabs-container">
            <div class="tabs-block">
                <div id="tabs-section" class="tabs">
                    <ul class="nav flex-column" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active tab-link" href="#tab-1"><i
                                    class="fi-rs-settings-sliders mr-10"></i>Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link tab-link" href="#tab-2" ><i
                                    class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                        </li>
                        <li class="nav-item">
                            <a href="#tab-3 " class="nav-link tab-link" style="color: #000;"><i class="fi-rs-marker mr-10"></i>My
                                Address</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link tab-link" href="#tab-4"><i class="fi-rs-user mr-10"></i>Account
                                details</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link tab-link" href="#tab-5"><i
                                    class="fi-rs-sign-out mr-10"></i>Logout</a>
                        </li>
                    </ul>

                    <section id="tab-1" class="tab-body entry-content active active-content">
                        
                            <div class="tab-content dashboard-content">
                                <div class="tab-pane fade active show" id="dashboard" role="tabpanel"
                                    aria-labelledby="dashboard-tab">
                                    <div class="card">
                                        <div class="card-header">
                                          <% console.log(user.username); %> 
                                            <h5 class="mb-0">Hello <%=user.username %> !</h5>
                                        </div>
                                        <div class="card-body">
                                            <p>From your account dashboard. you can easily check &amp; view your <a
                                                    href="/my-account/orders">recent orders</a>, manage your <a
                                                    href="/my-account/address">addresses</a> and <a
                                                    href="/my-account/edit">edit your password and account details.</a></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                       
                    </section>

                    <% const dataToReadable=(date)=>{
                        function formatAMPM(date) {
                         var hours = date.getHours();
                         var minutes = date.getMinutes();
                         var ampm = hours >= 12 ? 'PM' : 'AM';
                         hours = hours % 12;
                         hours = hours ? hours : 12; // the hour '0' should be '12'
                         minutes = minutes < 10 ? '0' +minutes : minutes; var strTime=hours + ':' + minutes + ampm; return strTime;
                         } 
                         const date_ = new Date(date);
                         let month = ['Jan','Feb','March','April','May','June','July','Aug','Sept','Nov','Dec']
                         let day = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']
                         let dd = date_.getDate();
                         let mm = date_.getMonth()-1;
                         let da=date_.getDay();
                         let dayText=day[da]
                         let monthText = month[mm]
                         let yyyy = date_.getFullYear();      
                         let time=formatAMPM(date_)
                             return `${dayText}, ${monthText} ${isNaN(dd)?'00':dd}, ${isNaN(yyyy)?'0000':yyyy},
                             ${time} ` }; %>
                 

                    <section id="tab-2" class="tab-body entry-content" >
                       
                            <div class="tab-content dashboard-content">
                              <div class="tab-pane fade active show" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                                <div class="card">
                                  <div class="card-header">
                                    <h5 class="mb-0">Your Orders</h5>
                                  </div>
                                  <div class="card-body">
                                    <div class="table-responsive">
                                      
                                      <table class="table" id="myDataTable">
                                        <thead>
                                          <tr>
                                            <th>Order ID</th>
                                            <th>Date</th>
                                            <th>Total</th>
                                            <th>Order Status</th>
                                          
                                            <th>Actions</th>
                                          </tr>
                                        </thead>
                                        <tbody>
                                          <% console.log(orders); %>
                                          <% orders.forEach(element => { %>
                                            
                                         
                                          <tr>
                                            <td><a href="/orders"><%= element._id%> </a></td>
                                            <td><%=dataToReadable(element?.orders?.createdAt)%> </td>
                                            <td>â‚¹<%= element.orders.totalPrice%></td>
                                            <td>
                                              <% if (element.orders.paymentStatus=='PAID') { %>
                                                <span class="badge rounded-pill alert-success">Pending/span>
                                             <% } else { %>
                                              <span class="badge rounded-pill alert-warning">Success</span>
                                             <% } %> 
                                              
                                              
                                            </td>
                                          
                                            <td><a href="/orders/<%= element.orders._id%>" class="btn-small d-block">View</a></td>
                                          </tr>
                                          <% }); %> 
                                        </tbody>
                                      </table>
                                      
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
              
                         
                    </section>

                    <section id="tab-3" class="tab-body entry-content">
                      <% address[0]?.address?.forEach((element,index)=> { %>
                            <div class="tab-content dashboard-content">
                              <div class="tab-pane fade active show" id="address" role="tabpanel" aria-labelledby="address-tab">
                                <div class="row">
                                  
                                  <div id="635ca7d65dd256aa4b725ca0" class="col-lg-6 mb-4">
                                    <div class="card mb-3 mb-lg-0">
                                      <div class="card-header">
                                        <h5 class="mb-0"><%= element.fName %>  <%= element.lName  %>  - <%= element.mobile  %></h5>
                                      </div>
                                      <div class="card-body">
                                        <address class="mb-1">
                                          <%= element.fName  %>,<br> <%= element.lName  %>
                                          <%= element.address  %>, <%= element.postcode  %>,<br>
                                          <%= element.town  %>, <%= element.country  %>
                                        </address>
                                        <a onclick="editAddress('634e51af5fe93f85e70f477d','635ca7d65dd256aa4b725ca0')" class="btn-small text-muted">Edit</a>
                                        <a onclick="deleteAddress('<%= element._id  %>')" class="btn-small text-danger ms-2">Delete</a>
                                      </div>
                                    </div>
                                  </div>
                                  
                                  
                                </div>
                                
                              </div>
                            </div>
                            
                            <%  }); %> 
                         
                            <div class="row mx-1 mt-2">
                                <div class="toggle_info">
                                    <span><i class="fi-rs-user mr-10"></i> <a href="#newAddress" data-bs-toggle="collapse" class="collapsed" aria-expanded="false">Add new address</a></span>
                                  </div>
                                <div class="panel-collapse login_form collapse show" id="newAddress" >
                                  <div class="panel-body">
                                    <form >
                                        <div class="form-group">
                                            <input type="text" required="" name="fname" id="fName" placeholder="First name *">
                                            <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                        </div>
                                        <div class="form-group">
                                            <input type="text" required="" name="lname" id="lName" placeholder="Last name *">
                                            <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                        </div>
                                        <div class="form-group">
                                            <div class="custom_select">
                
                                                <select class="form-control select-active" id="country" style="width: 200px;">
                                                    <option value="">Select an option...</option>
                                                    <% locals?.country.forEach((element)=>{ %>
                                                        <option>
                                                            <%-element.name%>
                                                        </option>
                                                        <% }) %>
                                                </select>
                                                <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <input type="text" name="billing_address" id="addressid" required="" placeholder="Address *">
                                            <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                        </div>
                                        <div class="form-group">
                                            <input required="" type="text" name="city" id="town" placeholder="City / Town *">
                                            <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                        </div>
                                        <div class="form-group">
                                            <input required="" type="text" name="landmark" id="landmark"
                                                placeholder="Appartments, suite, unit etc ... *">
                                            <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                        </div>
                                        <div class="form-group">
                                            <input required="" type="text" name="zipcode" id="postcode" placeholder="Postcode / ZIP *">
                                            <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                        </div>
                                        <div class="form-group">
                                            <input required="" type="text" name="phone" id="mobile" placeholder="Phone *">
                                            <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                        </div>
                                        <div class="form-group">
                                            <input required="" type="text" name="email" id="email" placeholder="Email address *">
                                            <p class="d-flex w-75 justify-content-start" style="color: rgb(230, 43, 40);"></p>
                                        </div> 
                                        <div class="form-group">
                                            <button type="button" onclick="validatoraddAddress()" class="btn btn-outline btn-lg btn-brand-outline font-weight-bold text-brand bg-white text-hover-white border-radius-5 btn-shadow-brand hover-up" name="login">Add address</button>
                                          </div>   
                                    </form>
                                  </div>
                                </div>
                              </div>
                    </section>

                    <section id="tab-4" class="tab-body entry-content">
                        <div class="col-md-8 tab-body  active active-content" id="tab-1">
                            <div class="tab-content dashboard-content">
                                <div class="tab-pane fade active show" id="dashboard" role="tabpanel"
                                    aria-labelledby="dashboard-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">Hello Don Sebastian!</h5>
                                        </div>
                                        <div class="card-body">
                                            <p>From your account dashboard. you can easily check &amp; view your <a
                                                    href="/my-account/orders">recent orders</a>, manage your <a
                                                    href="/my-account/address">addresses</a> and <a
                                                    href="/my-account/edit">edit your password and account details.</a></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="tab-5" class="tab-body entry-content">
                        <div class="col-md-8 tab-body  active active-content" id="tab-1">
                            <div class="tab-content dashboard-content">
                                <div class="tab-pane fade active show" id="dashboard" role="tabpanel"
                                    aria-labelledby="dashboard-tab">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">Hello Don Sebastian!</h5>
                                        </div>
                                        <div class="card-body">
                                            <p>From your account dashboard. you can easily check &amp; view your <a
                                                    href="/my-account/orders">recent orders</a>, manage your <a
                                                    href="/my-account/address">addresses</a> and <a
                                                    href="/my-account/edit">edit your password and account details.</a></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </section>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script>
    //
    // Tabs Toggler
    //

    (function ($) {
        // Variables
        const $tabLink = $('#tabs-section .tab-link');
        const $tabBody = $('#tabs-section .tab-body');
        let timerOpacity;

        // Toggle Class
        const init = () => {
            // Menu Click
            $tabLink.off('click').on('click', function (e) {
                // Prevent Default
                e.preventDefault();
                e.stopPropagation();

                // Clear Timers
                window.clearTimeout(timerOpacity);

                // Toggle Class Logic
                // Remove Active Classes
                $tabLink.removeClass('active ');
                $tabBody.removeClass('active ');
                $tabBody.removeClass('active-content');

                // Add Active Classes
                $(this).addClass('active');
                $($(this).attr('href')).addClass('active');

                // Opacity Transition Class
                timerOpacity = setTimeout(() => {
                    $($(this).attr('href')).addClass('active-content');
                }, 50);
            });
        };

        // Document Ready
        $(function () {
            init();
        });
    }(jQuery));




    function validatoraddAddress() {

const fName = document.getElementById('fName')
const lName = document.getElementById('lName')
const street = document.getElementById('addressid')
const apartment = document.getElementById('landmark')
const town = document.getElementById('town')
const country = document.getElementById('country')
const postcode = document.getElementById('postcode')
const mobile = document.getElementById('mobile')
const email = document.getElementById('email')



const fNameValue = fName.value.trim()
const lNameValue = lName.value.trim()
const streeValue = street.value.trim()
const apartmentValue = apartment.value.trim()
const townValue = town.value.trim()
const countryValue = country.options[country.selectedIndex].text
const postcodeValue = postcode.value.trim()
const mobileValue = mobile.value.trim()
const emailValue = email.value.trim()











const error1 = fName.parentElement.querySelector('p')
const error2 = lName.parentElement.querySelector('p')
const error3 = street.parentElement.querySelector('p')
const error4 = apartment.parentElement.querySelector('p')
const error5 = town.parentElement.querySelector('p')
const error6 = postcode.parentElement.querySelector('p')
const error7 = mobile.parentElement.querySelector('p')
const error8 = email.parentElement.querySelector('p')
const error9 = country.parentElement.querySelector('p')





let flag = 1


error1.innerText = ""
error2.innerText = ""
error3.innerText = ""
error4.innerText = ""
error5.innerText = ""
error6.innerText = ""
error7.innerText = ""
error8.innerText = ""
error9.innerText = ""

let arr = [fName, lName, street, apartment, town, country, postcode, mobile, email]
      arr.forEach((element) => {
        element.addEventListener("keyup", () => {
          element.parentElement.querySelector('p').innerText = ""
        })
      })



//First Name
if (fNameValue == "") {
    error1.innerText = 'This field is required'
    flag = 2
} else if (fNameValue.length <= 2) {
    error1.innerText = "First name must be minimum 2 characters"
    flag = 2
} else if (!fNameValue.match(/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/)) {
    error1.innerText = "Enter valid details"
    flag = 2
}
//Last Name
if (lNameValue == "") {
    error2.innerText = 'This field is required'
} else if (lNameValue.length < 2) {
    error2.innerText = "Last name must be minimum 1 characters"
    flag = 2
} else if (!lNameValue.match(/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/)) {
    error2.innerText = "Enter valid details"
    flag = 2
}
//Street Value
if (streeValue == "") {
    error3.innerText = 'This field is required'
    flag = 2
}
//Apartment Value
if (apartmentValue == "") {
    error4.innerText = 'This field is required'
    flag = 2
}
//Town Value
if (townValue == "") {
    error5.innerText = 'This field is required'
    flag = 2
}
//Postcode Value
if (postcodeValue == "") {
    error6.innerText = 'This field is required'
    flag = 2
} else if (postcodeValue.match(/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/)) {
    error6.innerText = 'Enter valid details'
    flag = 2
}
//Phone Number
if (mobileValue == "") {
    error7.innerText = "This field is required"
    flag = 2
} else if (!mobileValue.match(/^(\+\d{1,3}[- ]?)?\d{10}$/)) {
    error7.innerText = 'Enter valid phone number'
    flag = 2
}
//Email Valued
if (emailValue == "") {
    error8.innerText = "This field is required"
    flag = 2
} else if (!emailValue.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)) {
    error8.innerText = "Enter a valid email"
    flag = 2
}
if (countryValue == 'Select an option...') {
    error9.innerText = "This field is required"
    flag = 2
}

if (flag == 1) {
    submitadd(fNameValue, lNameValue, streeValue, apartmentValue, townValue, countryValue, postcodeValue, mobileValue, emailValue)
}
}


function submitadd(fNameValue, lNameValue, streeValue, apartmentValue, townValue, countryValue, postcodeValue, mobileValue, emailValue) {
    $.ajax({
        url:'/add_address',
        method:'put',
        data:{
          fName: fName,
          lName: lName,
          address: address,
          landmark: landmark,
          town: town,
          country: country,
          postcode: postcode,
          mobile: mobile,
          email: email,
        },
       
    })
}




    
  function deleteAddress(addressId) {
    Swal.fire({
      title: 'Are you sure?',
      text: "You won't be able to revert this!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
      if (result.isConfirmed) {
        Swal.fire(
          $.ajax({
            url: '/delete-address/' + addressId,
            method: 'DELETE',
            success: (response) => {
              location.reload()
            }
          }),
          'Deleted!',
          'Address is deleted.',
          'success'
        )
      }
    })
  }

</script> -->